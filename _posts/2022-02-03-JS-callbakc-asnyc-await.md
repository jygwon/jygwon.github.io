---
layout: post
title: JS의 동기 비동기 처리. 콜백, 프라미스, async, await
description: ''
sitemap: false
hide_last_modified: false
categories:
- dev
tags: javascript

---
### JS 실행방식

JS의 실행이 순차적으로 된다는 데 의의를 제기하는 사람들이 있는데, 너무 앞서 나가서 그런거다.

JS는 다른 언어들과 마찬가지로 순차적으로 실행된다. 더도 없고 덜도 없다.

> 여기서 용어 하나 배우자면 순차적 처리 방식을 동기화 처리라고 한다. synchronous process 라고 한다.

### 근데 왜 어떤사람들은 JS가 비동기라고 하나?

JS의 특정 구문이 비동기적으로 동작하기 때문이다.

버튼입력대기 이벤트 리스너, 타이머 등이 대표적인 예이다.

    setTimeout(()=>{console.log('done')},1000);
    element.addEventListener('click',()=>{console.log('clicked')});

브라우저는 JS를 해석할때 위에서 부터 한줄씩 실행하다가 위와 같은 구문을 만나면 이 구문을 WEB API라는 영역으로 보내버리고 다음 구문을 계속 실행한다. 그리고 WEB API에서는 이 구문들을 별도로 실행한다.

(따로국밥사진)

그래서 JS는 순차적으로 처리가 되지 않고 동시에 뭔가 처리가 된다라고 말하는 것이다.

> 여기서 용어 하나 배우자면 비순차적 처리 방식을 비동기화 처리라고 한다. asynchronous process 라고 한다.

### 그럼 순차적으로 할라면 어떡하냐?

고객이름을 받아서 고객이름을 가지고 전자명함출력을 한다 치면, 고객이름 가져오는게 반드시 먼저 처리 되어야 한다. 요런 순차적 작업은 어떻게 처리할까?

**JS에서 뭔가를 순차적으로 하고 싶으면 아래의 3가지 중 하나를 쓰면 된다.**

**_콜백, 프라미스, 비동기함수(async, await)_**

자주 사용되니까 지금부터 하나씩 알아보자.

### 콜백

콜백은 우리가 흔히 많이 보는거다. 괄호안에 함수가 써 있는 거 말이다. 아래와 같이 적는데

    먼저할거(나중할거());

\**나중할거()**가 콜백함수라 불리며 콜백의 뜻은 call at the back정도가 아닐까 싶다. 뭐 복잡하게 생각할 거 없이 먼저할거 안에 나중할거를 집어 넣으면 되고, 나중할거를 콜백함수라 부른다고 생각하면 된다.

위의 예제를 콜백으로 생각해 보면

고객이름조회(전자명함출력());

요렇게 쓰면 된다.

요거의 장단점은

* 장점: 쓰기 쉽다. 라는거.
* 단점: 실행 순서가 여러단계가 되면 읽기 복잡해진다. 라는거.

위 예제에서 단계가 좀 늘어난다고 가정하고 콜백을 쓰면 아래와 같이 된다.

    고객이름조회(고객주소조회(사진조회(전자명함출력())));

요런식으로 되는데, 위에는 함수명만 적혀 있어서 그나마 보기 쉽지만 안에 실행루틴까지 적혀 있으면 소스코드가 혼돈의 카오스 정도 된다.

그래서 요걸 좀 보기 쉽게 하는 방법이 있는데, 그게 프라미스다.

### 프라미스

내용

판독기

### 비동기함수(**_async, await_**)

내용

트라이 캐치 필요